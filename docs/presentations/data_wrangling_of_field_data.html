<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.548">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David Jansen">
<meta name="dcterms.date" content="2023-10-19">

<title>Data wrangling with field data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="../site_libs/tabwid-1.1.3/tabwid.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../presentations/good_data_practises.html">Workshops</a></li><li class="breadcrumb-item"><a href="../presentations/data_wrangling_of_field_data.html">Data Wrangling</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">David Jansen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workshops</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="//support_files/cv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Curriculum vit√¶</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Workshops</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/good_data_practises.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Good data practises</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/data_wrangling_of_field_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data Wrangling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/git_version_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction into Git</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/intro_into_ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction into ggplot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/reproducibility_workshop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reproducibility research</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Workshops</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
 <span class="menu-text">MCEVBD interview</span>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/MCEVBD_interview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MCEVBD job interview</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#background-1" id="toc-background-1" class="nav-link" data-scroll-target="#background-1">Background</a></li>
  <li><a href="#background-2" id="toc-background-2" class="nav-link" data-scroll-target="#background-2">Background</a></li>
  <li><a href="#background-of-code" id="toc-background-of-code" class="nav-link" data-scroll-target="#background-of-code">Background of code</a></li>
  <li><a href="#the-fun-begins" id="toc-the-fun-begins" class="nav-link" data-scroll-target="#the-fun-begins">The fun begins</a></li>
  <li><a href="#find-files" id="toc-find-files" class="nav-link" data-scroll-target="#find-files">find files</a></li>
  <li><a href="#the-importance-of-consistency" id="toc-the-importance-of-consistency" class="nav-link" data-scroll-target="#the-importance-of-consistency">The importance of consistency</a></li>
  <li><a href="#lets-open-some-data-1" id="toc-lets-open-some-data-1" class="nav-link" data-scroll-target="#lets-open-some-data-1">Lets open some data (1)</a></li>
  <li><a href="#lets-open-some-data-2" id="toc-lets-open-some-data-2" class="nav-link" data-scroll-target="#lets-open-some-data-2">Lets open some data (2)</a></li>
  <li><a href="#lets-open-some-data-3" id="toc-lets-open-some-data-3" class="nav-link" data-scroll-target="#lets-open-some-data-3">Lets open some data (3)</a></li>
  <li><a href="#metadata" id="toc-metadata" class="nav-link" data-scroll-target="#metadata">Metadata</a></li>
  <li><a href="#open-all-datafiles" id="toc-open-all-datafiles" class="nav-link" data-scroll-target="#open-all-datafiles">Open all datafiles</a></li>
  <li><a href="#reading-data-v1" id="toc-reading-data-v1" class="nav-link" data-scroll-target="#reading-data-v1">Reading data (v1)</a></li>
  <li><a href="#reading-data-v1-1" id="toc-reading-data-v1-1" class="nav-link" data-scroll-target="#reading-data-v1-1">Reading data (v1)</a></li>
  <li><a href="#troubleshooting-1a" id="toc-troubleshooting-1a" class="nav-link" data-scroll-target="#troubleshooting-1a">Troubleshooting (1a)</a></li>
  <li><a href="#troubleshooting-1b" id="toc-troubleshooting-1b" class="nav-link" data-scroll-target="#troubleshooting-1b">Troubleshooting (1b)</a></li>
  <li><a href="#troubleshooting-1c" id="toc-troubleshooting-1c" class="nav-link" data-scroll-target="#troubleshooting-1c">Troubleshooting (1c)</a></li>
  <li><a href="#troubleshooting-1b-1" id="toc-troubleshooting-1b-1" class="nav-link" data-scroll-target="#troubleshooting-1b-1">Troubleshooting (1b)</a></li>
  <li><a href="#troubleshooting-1d" id="toc-troubleshooting-1d" class="nav-link" data-scroll-target="#troubleshooting-1d">Troubleshooting (1d)</a></li>
  <li><a href="#troubleshooting-1e" id="toc-troubleshooting-1e" class="nav-link" data-scroll-target="#troubleshooting-1e">Troubleshooting (1e)</a></li>
  <li><a href="#troubleshooting-2a" id="toc-troubleshooting-2a" class="nav-link" data-scroll-target="#troubleshooting-2a">Troubleshooting (2a)</a></li>
  <li><a href="#troubleshooting-2a-1" id="toc-troubleshooting-2a-1" class="nav-link" data-scroll-target="#troubleshooting-2a-1">Troubleshooting (2a)</a></li>
  <li><a href="#troubleshooting-2b" id="toc-troubleshooting-2b" class="nav-link" data-scroll-target="#troubleshooting-2b">Troubleshooting (2b)</a></li>
  <li><a href="#troubleshooting-2c" id="toc-troubleshooting-2c" class="nav-link" data-scroll-target="#troubleshooting-2c">Troubleshooting (2c)</a></li>
  <li><a href="#troubleshooting-2d" id="toc-troubleshooting-2d" class="nav-link" data-scroll-target="#troubleshooting-2d">Troubleshooting (2d)</a></li>
  <li><a href="#troubleshooting-2e" id="toc-troubleshooting-2e" class="nav-link" data-scroll-target="#troubleshooting-2e">Troubleshooting (2e)</a></li>
  <li><a href="#troubleshooting-2f" id="toc-troubleshooting-2f" class="nav-link" data-scroll-target="#troubleshooting-2f">Troubleshooting (2f)</a></li>
  <li><a href="#troubleshooting-2d-1" id="toc-troubleshooting-2d-1" class="nav-link" data-scroll-target="#troubleshooting-2d-1">Troubleshooting (2d)</a></li>
  <li><a href="#troubleshooting-2e-1" id="toc-troubleshooting-2e-1" class="nav-link" data-scroll-target="#troubleshooting-2e-1">Troubleshooting (2e)</a></li>
  <li><a href="#are-we-there" id="toc-are-we-there" class="nav-link" data-scroll-target="#are-we-there">Are we there?</a></li>
  <li><a href="#quick-reminder" id="toc-quick-reminder" class="nav-link" data-scroll-target="#quick-reminder">Quick reminder</a></li>
  <li><a href="#troubleshooting-3a" id="toc-troubleshooting-3a" class="nav-link" data-scroll-target="#troubleshooting-3a">Troubleshooting (3a)</a></li>
  <li><a href="#troubleshooting-3a-1" id="toc-troubleshooting-3a-1" class="nav-link" data-scroll-target="#troubleshooting-3a-1">Troubleshooting (3a)</a></li>
  <li><a href="#troubleshooting-3b" id="toc-troubleshooting-3b" class="nav-link" data-scroll-target="#troubleshooting-3b">Troubleshooting (3b)</a></li>
  <li><a href="#troubleshooting-3c" id="toc-troubleshooting-3c" class="nav-link" data-scroll-target="#troubleshooting-3c">Troubleshooting (3c)</a></li>
  <li><a href="#troubleshooting-3c-tbd" id="toc-troubleshooting-3c-tbd" class="nav-link" data-scroll-target="#troubleshooting-3c-tbd">Troubleshooting (3c) tbd</a></li>
  <li><a href="#troubleshooting-3d" id="toc-troubleshooting-3d" class="nav-link" data-scroll-target="#troubleshooting-3d">Troubleshooting (3d)</a></li>
  <li><a href="#final-function" id="toc-final-function" class="nav-link" data-scroll-target="#final-function">Final function</a></li>
  <li><a href="#metadata-1" id="toc-metadata-1" class="nav-link" data-scroll-target="#metadata-1">Metadata</a>
  <ul class="collapse">
  <li><a href="#metadata-2" id="toc-metadata-2" class="nav-link" data-scroll-target="#metadata-2">Metadata</a></li>
  <li><a href="#metadata-3" id="toc-metadata-3" class="nav-link" data-scroll-target="#metadata-3">Metadata</a></li>
  <li><a href="#metadata-4" id="toc-metadata-4" class="nav-link" data-scroll-target="#metadata-4">Metadata</a></li>
  <li><a href="#troubleshooting-3b-1" id="toc-troubleshooting-3b-1" class="nav-link" data-scroll-target="#troubleshooting-3b-1">Troubleshooting (3b)</a></li>
  <li><a href="#troubleshooting-3b-2" id="toc-troubleshooting-3b-2" class="nav-link" data-scroll-target="#troubleshooting-3b-2">Troubleshooting (3b)</a></li>
  <li><a href="#troubleshooting-3c-1" id="toc-troubleshooting-3c-1" class="nav-link" data-scroll-target="#troubleshooting-3c-1">Troubleshooting (3c)</a></li>
  <li><a href="#troubleshooting-3d-1" id="toc-troubleshooting-3d-1" class="nav-link" data-scroll-target="#troubleshooting-3d-1">Troubleshooting (3d)</a></li>
  <li><a href="#troubleshooting-3e" id="toc-troubleshooting-3e" class="nav-link" data-scroll-target="#troubleshooting-3e">Troubleshooting (3e)</a></li>
  <li><a href="#troubleshooting-3f" id="toc-troubleshooting-3f" class="nav-link" data-scroll-target="#troubleshooting-3f">Troubleshooting (3f)</a></li>
  <li><a href="#troubleshooting-3g" id="toc-troubleshooting-3g" class="nav-link" data-scroll-target="#troubleshooting-3g">Troubleshooting (3g)</a></li>
  <li><a href="#troubleshooting-3g-1" id="toc-troubleshooting-3g-1" class="nav-link" data-scroll-target="#troubleshooting-3g-1">Troubleshooting (3g)</a></li>
  <li><a href="#troubleshooting-3h" id="toc-troubleshooting-3h" class="nav-link" data-scroll-target="#troubleshooting-3h">Troubleshooting (3h)</a></li>
  <li><a href="#next-vmc" id="toc-next-vmc" class="nav-link" data-scroll-target="#next-vmc">Next VMC</a></li>
  <li><a href="#finally-dates-and-times" id="toc-finally-dates-and-times" class="nav-link" data-scroll-target="#finally-dates-and-times">Finally dates and times</a></li>
  <li><a href="#fixing-times-1" id="toc-fixing-times-1" class="nav-link" data-scroll-target="#fixing-times-1">Fixing Times (1)</a></li>
  <li><a href="#fixing-times-2" id="toc-fixing-times-2" class="nav-link" data-scroll-target="#fixing-times-2">Fixing Times (2)</a></li>
  </ul></li>
  <li><a href="#use-cleaned-up-dataset" id="toc-use-cleaned-up-dataset" class="nav-link" data-scroll-target="#use-cleaned-up-dataset">Use cleaned up dataset</a>
  <ul class="collapse">
  <li><a href="#data-control" id="toc-data-control" class="nav-link" data-scroll-target="#data-control">Data control</a></li>
  <li><a href="#the-warning-is-because-naming-was-not-consistent" id="toc-the-warning-is-because-naming-was-not-consistent" class="nav-link" data-scroll-target="#the-warning-is-because-naming-was-not-consistent">the warning is because naming was not consistent</a></li>
  <li><a href="#quick-side-step" id="toc-quick-side-step" class="nav-link" data-scroll-target="#quick-side-step">quick side step</a></li>
  <li><a href="#note-that-here-there-are-na-values-because-the-tick-count-was-not-filled-out" id="toc-note-that-here-there-are-na-values-because-the-tick-count-was-not-filled-out" class="nav-link" data-scroll-target="#note-that-here-there-are-na-values-because-the-tick-count-was-not-filled-out">note that here there are NA values, because the tick count was not filled out</a></li>
  <li><a href="#are-these-all-0-or-are-the-not-sampled" id="toc-are-these-all-0-or-are-the-not-sampled" class="nav-link" data-scroll-target="#are-these-all-0-or-are-the-not-sampled">are these all 0 or are the not sampled?</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="data_wrangling_of_field_data.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../presentations/good_data_practises.html">Workshops</a></li><li class="breadcrumb-item"><a href="../presentations/data_wrangling_of_field_data.html">Data Wrangling</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Data wrangling with field data</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>David Jansen </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 19, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>For the Terminix project of Zack student collected tick count data in the the yard of peoples houses. This data was collected on a standardize datasheet.</p>
</section>
<section id="background-1" class="level2">
<h2 class="anchored" data-anchor-id="background-1">Background</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/empty_sheet_Page_1.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="background-2" class="level2">
<h2 class="anchored" data-anchor-id="background-2">Background</h2>
<p>On the top of the datasheet there was a line for some metadata such as date, time, weather and name of people collecting the data.</p>
<p>The rest of the form had space to note the counts of 2 tick species in 3 different life stages. There were 4 transects and every zone has 4 sections. So it total there were 4 * 4 * 2 * 3 = 96 counts per yard per visit.</p>
<p>The files would be saved with as a csv file with the house number, date (mm_dd_yy) and experiment stage in the name. For example 012_07_12_23_pretreatment.</p>
</section>
<section id="background-of-code" class="level2">
<h2 class="anchored" data-anchor-id="background-of-code">Background of code</h2>
<p>The aim of the code I was writing was to open all the files, extract both the metadata and the count data and combine all of it into a large file.</p>
<p>An early test of the code on a few of the sheets went well and worked as expected.</p>
</section>
<section id="the-fun-begins" class="level2">
<h2 class="anchored" data-anchor-id="the-fun-begins">The fun begins</h2>
<ul>
<li>get R setup</li>
<li>slightly complicated way of opening packages</li>
<li>makes sharing code easier</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Code to open the datasheets of the project</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"tidyverse"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>              , <span class="st">"cellranger"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>              , <span class="st">"data.table"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>              , <span class="st">"janitor"</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>              , <span class="st">"purrr"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>              , <span class="st">"readxl"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="do">## install packages if needed and open libraries</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">setdiff</span>(packages, <span class="fu">rownames</span>(<span class="fu">installed.packages</span>()))) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="fu">setdiff</span>(packages, <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())), </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">dependencies =</span> <span class="cn">TRUE</span>)}  </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">invisible</span>(<span class="fu">lapply</span>(packages, library, <span class="at">character.only =</span> <span class="cn">TRUE</span>, </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                 <span class="at">warn.conflicts =</span> <span class="cn">TRUE</span>, <span class="at">quietly =</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ
‚úî dplyr     1.1.2     ‚úî readr     2.1.4
‚úî forcats   1.0.0     ‚úî stringr   1.5.0
‚úî ggplot2   3.4.4     ‚úî tibble    3.2.1
‚úî lubridate 1.9.2     ‚úî tidyr     1.3.0
‚úî purrr     1.0.1     
‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ
‚úñ dplyr::filter() masks stats::filter()
‚úñ dplyr::lag()    masks stats::lag()
‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors

Attaching package: 'data.table'


The following objects are masked from 'package:lubridate':

    hour, isoweek, mday, minute, month, quarter, second, wday, week,
    yday, year


The following objects are masked from 'package:dplyr':

    between, first, last


The following object is masked from 'package:purrr':

    transpose



Attaching package: 'janitor'


The following objects are masked from 'package:stats':

    chisq.test, fisher.test</code></pre>
</div>
</div>
</section>
<section id="find-files" class="level2">
<h2 class="anchored" data-anchor-id="find-files">find files</h2>
<ul>
<li>Spaces in the path :-(</li>
<li>Remember <strong><em>No Spaces :-)</em></strong></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## all the datasheets are in a folder on Box</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="do">## on my computer this is at </span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="do">## C:\Users\dajansen3\Box\All data sheet entries EC 2023</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="do">## adapt to your path</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>sheet_folder <span class="ot">=</span> <span class="st">"C://Users//dajansen3//Box//All data sheet entries EC 2023//"</span>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-importance-of-consistency" class="level2">
<h2 class="anchored" data-anchor-id="the-importance-of-consistency">The importance of consistency</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">filename =</span> <span class="fu">list.files</span>(<span class="at">path =</span> sheet_folder)[<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">164</span>, <span class="dv">876</span>, <span class="dv">992</span>,  <span class="dv">200</span>)]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 1
  filename                         
  &lt;chr&gt;                            
1 001_062623_posttreatment3.csv    
2 013_072823_posttreatment2.csv    
3 055_6_15_23_PostTreatment1.csv   
4 063_06.22.2023_PostTreatment2.csv
5 015_7_19_23.csv                  </code></pre>
</div>
</div>
<ul>
<li><p>dates are in many formats</p></li>
<li><p>this makes writing general code hard</p></li>
<li><p>For now I‚Äôll work with these, but all fix (manually by Zack)</p></li>
</ul>
</section>
<section id="lets-open-some-data-1" class="level2">
<h2 class="anchored" data-anchor-id="lets-open-some-data-1">Lets open some data (1)</h2>
<ul>
<li><p>The files have a few lines with metadata.</p></li>
<li><p>These should not be loaded for count data</p></li>
<li><p>Using the skip option to exclude the first 4 lines</p></li>
<li><p>For the count data the first column is also not need.</p></li>
<li><p>Only the 2nd to 6th column contain data on tick counts</p></li>
</ul>
</section>
<section id="lets-open-some-data-2" class="level2">
<h2 class="anchored" data-anchor-id="lets-open-some-data-2">Lets open some data (2)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="fu">list.files</span>(<span class="at">path =</span> sheet_folder, <span class="at">full.names =</span> <span class="cn">TRUE</span>)[<span class="dv">2</span>], </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">skip =</span> <span class="dv">4</span>, <span class="at">col_select =</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 96 Columns: 5
‚îÄ‚îÄ Column specification
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Delimiter: "," chr
(4): transect, section, tick_species, tick_stage dbl (1): tick_count
‚Ñπ Use `spec()` to retrieve the full column specification for this data. ‚Ñπ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
‚Ä¢ `` -&gt; `...1`
‚Ä¢ `` -&gt; `...7`
‚Ä¢ `` -&gt; `...8`
‚Ä¢ `` -&gt; `...9`
‚Ä¢ `` -&gt; `...10`
‚Ä¢ `` -&gt; `...11`
‚Ä¢ `` -&gt; `...12`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 96 √ó 5
   transect section tick_species tick_stage tick_count
   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;           &lt;dbl&gt;
 1 wood     a       Ix           A                   0
 2 wood     a       Ix           N                   0
 3 wood     a       Ix           L                   0
 4 wood     b       Ix           A                   0
 5 wood     b       Ix           N                   0
 6 wood     b       Ix           L                   0
 7 wood     c       Ix           A                   0
 8 wood     c       Ix           N                   0
 9 wood     c       Ix           L                   0
10 wood     d       Ix           A                   0
# ‚Ñπ 86 more rows</code></pre>
</div>
</div>
<ul>
<li>yeah that looks good, but‚Ä¶</li>
</ul>
</section>
<section id="lets-open-some-data-3" class="level2">
<h2 class="anchored" data-anchor-id="lets-open-some-data-3">Lets open some data (3)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="fu">list.files</span>(<span class="at">path =</span> sheet_folder, <span class="at">full.names =</span> <span class="cn">TRUE</span>)[<span class="dv">3</span>], </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">skip =</span> <span class="dv">4</span>, <span class="at">col_select =</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 98 Columns: 5
‚îÄ‚îÄ Column specification
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Delimiter: "," chr
(5): ...2, ...3, ...4, ...5, ...6
‚Ñπ Use `spec()` to retrieve the full column specification for this data. ‚Ñπ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
‚Ä¢ `` -&gt; `...1`
‚Ä¢ `` -&gt; `...2`
‚Ä¢ `` -&gt; `...3`
‚Ä¢ `` -&gt; `...4`
‚Ä¢ `` -&gt; `...5`
‚Ä¢ `` -&gt; `...6`
‚Ä¢ `` -&gt; `...7`
‚Ä¢ `` -&gt; `...8`
‚Ä¢ `` -&gt; `...9`
‚Ä¢ `` -&gt; `...10`
‚Ä¢ `` -&gt; `...11`
‚Ä¢ `` -&gt; `...12`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 98 √ó 5
   ...2     ...3    ...4         ...5       ...6      
   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;     
 1 &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;         &lt;NA&gt;       &lt;NA&gt;      
 2 transect section tick_species tick_stage tick_count
 3 wood     a       Ix           A          0         
 4 wood     a       Ix           N          0         
 5 wood     a       Ix           L          0         
 6 wood     b       Ix           A          N/A       
 7 wood     b       Ix           N          N/A       
 8 wood     b       Ix           L          N/A       
 9 wood     c       Ix           A          N/A       
10 wood     c       Ix           N          N/A       
# ‚Ñπ 88 more rows</code></pre>
</div>
</div>
<ul>
<li>what is happening here?</li>
<li>extra lines of white space?</li>
</ul>
<blockquote class="blockquote">
<ul>
<li>Some troubleshooting will be needed</li>
</ul>
</blockquote>
</section>
<section id="metadata" class="level2">
<h2 class="anchored" data-anchor-id="metadata">Metadata</h2>
<p>Looking at the metadata for the same two files</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="fu">list.files</span>(<span class="at">path =</span> sheet_folder, <span class="at">full.names =</span> <span class="cn">TRUE</span>)[<span class="dv">2</span>], <span class="at">n_max =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1 Columns: 12
‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Delimiter: ","
chr  (9): date, mowed, temp, VMC, cloud_cover, w_person, we_person, le-perso...
dbl  (1): house
time (2): start_time, end_time

‚Ñπ Use `spec()` to retrieve the full column specification for this data.
‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 12
  house date   start_time end_time mowed temp     VMC   cloud_cover w_person
  &lt;dbl&gt; &lt;chr&gt;  &lt;time&gt;     &lt;time&gt;   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;   
1     1 6/1523 09:05      09:24    No    58 (air) 21%   Cloudy      SA      
# ‚Ñπ 3 more variables: we_person &lt;chr&gt;, `le-person` &lt;chr&gt;, l_person &lt;chr&gt;</code></pre>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="fu">list.files</span>(<span class="at">path =</span> sheet_folder, <span class="at">full.names =</span> <span class="cn">TRUE</span>)[<span class="dv">3</span>], <span class="at">n_max =</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1 Columns: 12
‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Delimiter: ","
chr  (7): date, mowed, cloud_cover, w_person, we_person, le-person, l_person
dbl  (3): house, temp, VMC
time (2): start_time, end_time

‚Ñπ Use `spec()` to retrieve the full column specification for this data.
‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 12
  house date   start_time end_time mowed  temp   VMC cloud_cover w_person
  &lt;dbl&gt; &lt;chr&gt;  &lt;time&gt;     &lt;time&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;   
1     1 6/5/23 09:10      09:40    N        50    11 cloudy      ML      
# ‚Ñπ 3 more variables: we_person &lt;chr&gt;, `le-person` &lt;chr&gt;, l_person &lt;chr&gt;</code></pre>
</div>
</div>
<p>Looks ok and we will get back to the metadata later</p>
</section>
<section id="open-all-datafiles" class="level2">
<h2 class="anchored" data-anchor-id="open-all-datafiles">Open all datafiles</h2>
<ul>
<li>Aim: all datasheets and combine into one data file.</li>
<li>We are going to make a function to read the data</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>all_datasheets <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> sheet_folder) </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>read_data_v1 <span class="ot">=</span> <span class="cf">function</span>(filepath) {     <span class="do">## hint v1 is suggesting there are going to be more :-)</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#print(filepath) ## can help to find issues</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(filepath, <span class="do">## path to specific file,</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">skip =</span> <span class="dv">4</span>, <span class="do">## skip first 4 rows</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_select =</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>),  <span class="do">## select column 2 to 6</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">show_col_types =</span> <span class="cn">FALSE</span>, <span class="do">## don't show the message,,</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">name_repair =</span> <span class="st">"minimal"</span> <span class="do">## don't try and repair names</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="reading-data-v1" class="level2">
<h2 class="anchored" data-anchor-id="reading-data-v1">Reading data (v1)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)) <span class="sc">%&gt;%</span> <span class="do">## lest first try it 2</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(<span class="at">.x =</span> path_to_sheet, <span class="at">.f =</span> read_data_v1)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>path_to_sheet) <span class="sc">%&gt;%</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## counting lines as a quick check</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_rows_in_tibble =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 3
  datasheet          data              nr_rows_in_tibble
  &lt;chr&gt;              &lt;list&gt;                        &lt;dbl&gt;
1 001 07_07_2023.csv &lt;tibble [96 √ó 5]&gt;                96
2 001 6_15_23.csv    &lt;tibble [96 √ó 5]&gt;                96</code></pre>
</div>
</div>
<p>!!! Yeah that worked !!!</p>
</section>
<section id="reading-data-v1-1" class="level2">
<h2 class="anchored" data-anchor-id="reading-data-v1-1">Reading data (v1)</h2>
<p>Now on all of them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span>    </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(<span class="at">.x =</span> path_to_sheet, <span class="at">.f =</span> read_data_v1)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_rows_in_tibble =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `mutate()`:
‚Ñπ In argument: `data = map(.x = path_to_sheet, .f = read_data_v1)`.
Caused by error in `map()`:
‚Ñπ In index: 3.
Caused by error:
! Names can't be empty.
‚úñ Empty names found at locations 1, 2, 3, 4, and 5.</code></pre>
</div>
</div>
<p>Boo an error</p>
</section>
<section id="troubleshooting-1a" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-1a">Troubleshooting (1a)</h2>
<ul>
<li>What is happening?</li>
<li>Troubleshooting code/data
<ul>
<li>Errors stop the running of code. This can make troubleshooting hard.</li>
<li>The purrr package has a function that can keep code running.</li>
<li>Temporarily give an alternative outcome.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">## purrr function</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="do">## give the function to run and an alternative answer in case of error</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>read_data_possibly_v1 <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">possibly</span>(<span class="at">.f =</span> read_data_v1,  </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">otherwise =</span> <span class="fu">tibble</span>())  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="troubleshooting-1b" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-1b">Troubleshooting (1b)</h2>
<ul>
<li>rerun code</li>
<li>problem sheets have an empty tibble and 0 rows</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(<span class="at">.x =</span> path_to_sheet, <span class="at">.f =</span> read_data_possibly_v1)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_rows_in_tibble =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>path_to_sheet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Multiple files in zip: reading '[Content_Types].xml'</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 3
   datasheet                      data              nr_rows_in_tibble
   &lt;chr&gt;                          &lt;list&gt;                        &lt;dbl&gt;
 1 001 07_07_2023.csv             &lt;tibble [96 √ó 5]&gt;                96
 2 001 6_15_23.csv                &lt;tibble [96 √ó 5]&gt;                96
 3 001_060523_pretreatment.csv    &lt;tibble [0 √ó 0]&gt;                  0
 4 001_062623_posttreatment3.csv  &lt;tibble [0 √ó 0]&gt;                  0
 5 001_071423_posttreatment1.csv  &lt;tibble [0 √ó 0]&gt;                  0
 6 001_071923_posttreatment2.csv  &lt;tibble [0 √ó 0]&gt;                  0
 7 001_072823_posttreatment3.csv  &lt;tibble [0 √ó 0]&gt;                  0
 8 001_080323_posttreatment8.csv  &lt;tibble [0 √ó 0]&gt;                  0
 9 001_6_15_23_posttreatment1.csv &lt;tibble [96 √ó 5]&gt;                96
10 001_6_22_23_PostTreatment2.csv &lt;tibble [0 √ó 0]&gt;                  0</code></pre>
</div>
</div>
</section>
<section id="troubleshooting-1c" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-1c">Troubleshooting (1c)</h2>
<ul>
<li>All the ones with 0 have a problem</li>
<li>Let‚Äôs have a look at on of them.</li>
</ul>
</section>
<section id="troubleshooting-1b-1" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-1b-1">Troubleshooting (1b)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(path_to_sheet) <span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">shell.exec</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://uwmadison.box.com/s/7tfrmpuhn5rex3sdes0j9uc73zpr9wiv" title="Example problem file">Open an example problem filel</a></p>
<ul>
<li>extra lines of white space</li>
<li>need to update the read function to deal with this</li>
<li>after a lot of trial and error, I found the fread function from the data.table package could deal with this</li>
</ul>
</section>
<section id="troubleshooting-1d" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-1d">Troubleshooting (1d)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>read_data_v2 <span class="ot">=</span> <span class="cf">function</span>(filepath) { </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="do">## hint v2 is suggesting there are going to be more :-)</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(filepath </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>        , <span class="at">header =</span> <span class="cn">TRUE</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>        , <span class="at">skip =</span> <span class="st">"transect"</span>  <span class="do">## only start reading file after transect</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>        , <span class="at">select =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>  <span class="do">## selected columns</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>        , <span class="at">blank.lines.skip =</span> <span class="cn">TRUE</span> <span class="do">## skip and empty lines</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>() </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>read_data_possibly_v2 <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">possibly</span>(<span class="at">.f =</span> read_data_v2, <span class="at">otherwise =</span> <span class="fu">tibble</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="troubleshooting-1e" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-1e">Troubleshooting (1e)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(<span class="at">.x =</span> path_to_sheet, <span class="at">.f =</span> read_data_possibly_v2)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_rows_in_tibble =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 4
   datasheet                      path_to_sheet       data     nr_rows_in_tibble
   &lt;chr&gt;                          &lt;chr&gt;               &lt;list&gt;               &lt;dbl&gt;
 1 001 07_07_2023.csv             C://Users//dajanse‚Ä¶ &lt;tibble&gt;                96
 2 001 6_15_23.csv                C://Users//dajanse‚Ä¶ &lt;tibble&gt;                96
 3 001_060523_pretreatment.csv    C://Users//dajanse‚Ä¶ &lt;tibble&gt;                96
 4 001_062623_posttreatment3.csv  C://Users//dajanse‚Ä¶ &lt;tibble&gt;                96
 5 001_071423_posttreatment1.csv  C://Users//dajanse‚Ä¶ &lt;tibble&gt;                96
 6 001_071923_posttreatment2.csv  C://Users//dajanse‚Ä¶ &lt;tibble&gt;                96
 7 001_072823_posttreatment3.csv  C://Users//dajanse‚Ä¶ &lt;tibble&gt;                96
 8 001_080323_posttreatment8.csv  C://Users//dajanse‚Ä¶ &lt;tibble&gt;                96
 9 001_6_15_23_posttreatment1.csv C://Users//dajanse‚Ä¶ &lt;tibble&gt;                96
10 001_6_22_23_PostTreatment2.csv C://Users//dajanse‚Ä¶ &lt;tibble&gt;                 0</code></pre>
</div>
</div>
<ul>
<li>better but there is still an problem</li>
</ul>
</section>
<section id="troubleshooting-2a" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-2a">Troubleshooting (2a)</h2>
<ul>
<li>all files should be csv</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(<span class="at">.x =</span> path_to_sheet, <span class="at">.f =</span> read_data_possibly_v2)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_rows_in_tibble =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nr_rows_in_tibble <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(path_to_sheet) <span class="sc">%&gt;%</span>  <span class="fu">pull</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_lines</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Multiple files in zip: reading '[Content_Types].xml'</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
[2] "&lt;Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt;&lt;Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\"/&gt;&lt;Default Extension=\"xml\" ContentType=\"application/xml\"/&gt;&lt;Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\"/&gt;&lt;Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\"/&gt;&lt;Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\"/&gt;&lt;Override PartName=\"/xl/worksheets/sheet1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\"/&gt;&lt;Override PartName=\"/xl/theme/theme1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.theme+xml\"/&gt;&lt;Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/&gt;&lt;Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/&gt;&lt;/Types&gt;"</code></pre>
</div>
</div>
<ul>
<li>but this looks like an excel file?</li>
</ul>
</section>
<section id="troubleshooting-2a-1" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-2a-1">Troubleshooting (2a)</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/frustrated_coder.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="troubleshooting-2b" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-2b">Troubleshooting (2b)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shell.exec</span>(<span class="fu">paste0</span>(sheet_folder, <span class="st">"001_6_22_23_PostTreatment2.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://uwmadison.box.com/s/cje1y0nietw7hqz7ntibj4dn70x0s75f" title="Example excel sheet">Open 001_6_22_23_PostTreatment2.csv in excel</a></p>
</section>
<section id="troubleshooting-2c" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-2c">Troubleshooting (2c)</h2>
<ul>
<li>Lets open it as an excel file</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="fu">paste0</span>(sheet_folder, <span class="st">"001_6_22_23_PostTreatment2.csv"</span>), <span class="at">skip =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
‚Ä¢ `` -&gt; `...6`
‚Ä¢ `` -&gt; `...7`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 96 √ó 7
   transect section tick_species tick_stage tick_count ...6  ...7 
   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;      &lt;lgl&gt; &lt;lgl&gt;
 1 wood     a       Ix           A          NA         NA    NA   
 2 wood     a       Ix           N          NA         NA    NA   
 3 wood     a       Ix           L          NA         NA    NA   
 4 wood     b       Ix           A          NA         NA    NA   
 5 wood     b       Ix           N          NA         NA    NA   
 6 wood     b       Ix           L          NA         NA    NA   
 7 wood     c       Ix           A          0          NA    NA   
 8 wood     c       Ix           N          0          NA    NA   
 9 wood     c       Ix           L          0          NA    NA   
10 wood     d       Ix           A          0          NA    NA   
# ‚Ñπ 86 more rows</code></pre>
</div>
</div>
<blockquote class="blockquote">
<ul>
<li>fun!! we have Excel files with a csv extension</li>
<li>I‚Äôll also share now that there are real Excel files with an xlsx extension</li>
</ul>
</blockquote>
</section>
<section id="troubleshooting-2d" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-2d">Troubleshooting (2d)</h2>
<div class="nonincremental">
<ul>
<li>To solve it we first need to know which files are:</li>
</ul>
<ol type="1">
<li>real csv</li>
<li>real excel files</li>
<li>excel files with csv extension</li>
</ol>
</div>
<blockquote class="blockquote">
<ul>
<li>We can use the purrr possible from earlier.</li>
</ul>
</blockquote>
</section>
<section id="troubleshooting-2e" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-2e">Troubleshooting (2e)</h2>
<ul>
<li>With files are ‚Äòfake‚Äô csv files</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>excel_files_with_csv_extension <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(<span class="at">.x =</span> path_to_sheet, <span class="at">.f =</span> read_data_possibly_v2)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_rows_in_tibble =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## filter all the ones with 0s as these are mistakes</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nr_rows_in_tibble <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet) <span class="sc">%&gt;%</span> <span class="do">## select only the datasheet names  </span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>() <span class="do">## and pull these into a vector</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>excel_files_with_csv_extension[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "001_6_22_23_PostTreatment2.csv"     "001_6_5_23_PreTreatment.csv"       
 [3] "001_7_14_23_PostTreatment5.csv"     "001_7_7_23_PostTreatment4.csv"     
 [5] "002_6_22_23_PostTreatment2.csv"     "002_6_5_23_PreTreatment.csv"       
 [7] "002_7_14_23_2ndposttreatment1.xlsx" "002_7_14_23_PostTreatment5.csv"    
 [9] "002_7_28_23_ControlWeek8.csv"       "002_7_7_23_PostTreatment4.csv"     </code></pre>
</div>
</div>
<p>There are 362 csv files that actually are excel files.</p>
</section>
<section id="troubleshooting-2f" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-2f">Troubleshooting (2f)</h2>
<ul>
<li>Updates to the function to also load excel files</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>read_data_v3 <span class="ot">=</span> <span class="cf">function</span>(filetype, filepath) { </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(filetype <span class="sc">==</span> <span class="st">"csv"</span>) { </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    data.table<span class="sc">::</span><span class="fu">fread</span>(filepath</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">header =</span> <span class="cn">TRUE</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">skip =</span> <span class="st">"transect"</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">select =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">blank.lines.skip =</span> <span class="cn">TRUE</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>                      ) </span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> { </span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">read_excel</span>(filepath, <span class="at">skip =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(transect, section, tick_species, tick_stage, tick_count)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    } <span class="do">## end of else </span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  } <span class="do">## end of function</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>read_data_possibly_v3 <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">possibly</span>(<span class="at">.f =</span> read_data_v3, <span class="at">otherwise =</span> <span class="fu">tibble</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="troubleshooting-2d-1" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-2d-1">Troubleshooting (2d)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">filetype =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(datasheet, <span class="st">"csv"</span>), <span class="st">"csv"</span>, <span class="st">"xlsx"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## if a file is part of the 'fake' list change the extension</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">real_filetype =</span> <span class="fu">if_else</span>(<span class="at">condition =</span>datasheet <span class="sc">%in%</span> excel_files_with_csv_extension</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>                                 , <span class="at">true  =</span> <span class="st">'xlsx'</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>                                 , <span class="at">false =</span> filetype)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map2</span>(<span class="at">.x =</span> real_filetype,  <span class="do">## map2 needs two inputs</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">.y =</span> path_to_sheet, </span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">.f =</span> read_data_possibly_v3)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_rows_in_tibble =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span> path_to_sheet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
‚Ä¢ `` -&gt; `...6`
‚Ä¢ `` -&gt; `...7`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 5
   datasheet                   filetype real_filetype data     nr_rows_in_tibble
   &lt;chr&gt;                       &lt;chr&gt;    &lt;chr&gt;         &lt;list&gt;               &lt;dbl&gt;
 1 001 07_07_2023.csv          csv      csv           &lt;dt&gt;                    96
 2 001 6_15_23.csv             csv      csv           &lt;dt&gt;                    96
 3 001_060523_pretreatment.csv csv      csv           &lt;dt&gt;                    96
 4 001_062623_posttreatment3.‚Ä¶ csv      csv           &lt;dt&gt;                    96
 5 001_071423_posttreatment1.‚Ä¶ csv      csv           &lt;dt&gt;                    96
 6 001_071923_posttreatment2.‚Ä¶ csv      csv           &lt;dt&gt;                    96
 7 001_072823_posttreatment3.‚Ä¶ csv      csv           &lt;dt&gt;                    96
 8 001_080323_posttreatment8.‚Ä¶ csv      csv           &lt;dt&gt;                    96
 9 001_6_15_23_posttreatment1‚Ä¶ csv      csv           &lt;dt&gt;                    96
10 001_6_22_23_PostTreatment2‚Ä¶ csv      xlsx          &lt;tibble&gt;                96</code></pre>
</div>
</div>
</section>
<section id="troubleshooting-2e-1" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-2e-1">Troubleshooting (2e)</h2>
<ul>
<li>Looks like we are getting somewhere</li>
<li>Next step is to combine all the sheets</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>combined_sheets <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">filetype =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(datasheet, <span class="st">"csv"</span>), <span class="st">"csv"</span>, <span class="st">"xlsx"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">real_filetype =</span> <span class="fu">if_else</span>(datasheet <span class="sc">%in%</span> excel_files_with_csv_extension, </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">'xlsx'</span>, filetype)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map2</span>(<span class="at">.x =</span> real_filetype, <span class="at">.y =</span> path_to_sheet, </span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">.f =</span> read_data_possibly_v3)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_rows_in_tibble =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
New names:
‚Ä¢ `` -&gt; `...6`
‚Ä¢ `` -&gt; `...7`</code></pre>
</div>
</div>
<!-- ## Troubleshooting (2f) -->
<!-- - On every sheets with should have 4 zones with 4 sections and data on 2 tick species with 3 life stages; -->
<!-- `4 * 4 * 2 * 3 = 96` -->
<!-- ```{r} -->
<!-- combined_sheets %>% filter(nr_rows_in_tibble != 96)  -->
<!-- ``` -->
<!-- Ok there will be 2 files that will need checking -->
<!-- ```{r} -->
<!-- combined_sheets %>%  -->
<!--   filter(nr_rows_in_tibble == 95) %>%  -->
<!--   unnest(cols = c(data)) %>%   -->
<!--   group_by(transect) %>%  -->
<!--   summarise(n())  -->
<!-- ``` -->
<!-- - More manually checks (go back to data sheets) -->
</section>
<section id="are-we-there" class="level2">
<h2 class="anchored" data-anchor-id="are-we-there">Are we there?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>combined_sheets <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `list_unchop()`:
! Can't combine `x[[1]]$tick_count` &lt;integer&gt; and `x[[3]]$tick_count` &lt;character&gt;.</code></pre>
</div>
</div>
<ul>
<li>Unfortunately we have another sigh moment.</li>
<li>Reason is that we have two data types in one column.</li>
</ul>
</section>
<section id="quick-reminder" class="level2">
<h2 class="anchored" data-anchor-id="quick-reminder">Quick reminder</h2>
<ul>
<li><p>The full content of columns in R need to be in same data type and units</p>
<ul>
<li><p>character (e.g, ‚Äúa‚Äù, ‚Äúswc‚Äù)</p></li>
<li><p>numeric (real or decimal) (e.g, 2, 2.0)</p></li>
<li><p>logical (FALSE, TRUE)</p></li>
<li><p>integer (e.g, 2L, as.integer(3))</p></li>
<li><p>complex (e.g, 1 + 0i, 1 + 4i) &lt;- These can be annoying</p></li>
</ul></li>
</ul>
</section>
<section id="troubleshooting-3a" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3a">Troubleshooting (3a)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>combined_sheets_temp <span class="ot">&lt;-</span> combined_sheets <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_data =</span> <span class="fu">map</span>(<span class="at">.x =</span> data, </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## turn all the columns to character                         </span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">.f =</span> mutate_all, as.character)) </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>combined_sheets_temp <span class="sc">%&gt;%</span> </span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, temp_data) <span class="sc">%&gt;%</span> </span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(temp_data)) <span class="sc">%&gt;%</span> </span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="do">## turn the tick count column back to numeric</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="do">## if this doesn't work the cell will turn into NA</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_count =</span> <span class="fu">as.numeric</span>(tick_count)) <span class="sc">%&gt;%</span> </span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(tick_count)) <span class="sc">%&gt;%</span> </span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(temp_count))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `temp_count = as.numeric(tick_count)`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7,105 √ó 7
   datasheet      transect section tick_species tick_stage tick_count temp_count
   &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;
 1 001_060523_pr‚Ä¶ wood     b       Ix           A          N/A                NA
 2 001_060523_pr‚Ä¶ wood     b       Ix           N          N/A                NA
 3 001_060523_pr‚Ä¶ wood     b       Ix           L          N/A                NA
 4 001_060523_pr‚Ä¶ wood     c       Ix           A          N/A                NA
 5 001_060523_pr‚Ä¶ wood     c       Ix           N          N/A                NA
 6 001_060523_pr‚Ä¶ wood     c       Ix           L          N/A                NA
 7 001_060523_pr‚Ä¶ wood     d       Ix           A          N/A                NA
 8 001_060523_pr‚Ä¶ wood     d       Ix           N          N/A                NA
 9 001_060523_pr‚Ä¶ wood     d       Ix           L          N/A                NA
10 001_060523_pr‚Ä¶ wood-ec‚Ä¶ b       Ix           A          N/A                NA
# ‚Ñπ 7,095 more rows</code></pre>
</div>
</div>
</section>
<section id="troubleshooting-3a-1" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3a-1">Troubleshooting (3a)</h2>
<p>What are the non-numeric values?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ok there are cells that have different values then NA or a number</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>combined_sheets_temp <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, temp_data) <span class="sc">%&gt;%</span> </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(temp_data)) <span class="sc">%&gt;%</span> </span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_count =</span> <span class="fu">as.numeric</span>(tick_count)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(temp_count)) <span class="sc">%&gt;%</span> </span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tick_count) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `temp_count = as.numeric(tick_count)`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] NA      "N/A"   "NA"    "Na"    "20+"   "nA"    "N.A"   "1(M)"  "1(F)" 
[10] "1 (F)" "1pm"  </code></pre>
</div>
</div>
</section>
<section id="troubleshooting-3b" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3b">Troubleshooting (3b)</h2>
<ul>
<li>Multiple NA values</li>
<li>Tell R about these NA values</li>
<li>We could use mutate, but better to adapt function.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>read_data_v4 <span class="ot">=</span> <span class="cf">function</span>(filetype, filepath) {</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(filetype <span class="sc">==</span> <span class="st">"csv"</span>) {</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    data.table<span class="sc">::</span><span class="fu">fread</span>(filepath , <span class="at">header =</span> <span class="cn">TRUE</span> , <span class="at">skip =</span> <span class="st">"transect"</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">select =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">blank.lines.skip =</span> <span class="cn">TRUE</span>, </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">"N/A"</span>, <span class="st">"NA"</span>, <span class="st">"Na"</span>, <span class="st">"nA"</span>, <span class="st">"N.A"</span>)) </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> { </span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">read_excel</span>(filepath , <span class="at">skip =</span> <span class="dv">4</span> , </span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">na =</span> <span class="fu">c</span>(<span class="st">"N/A"</span>, <span class="st">"NA"</span>, <span class="st">"Na"</span>, <span class="st">"nA"</span>, <span class="st">"N.A"</span>), </span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">.name_repair =</span> <span class="st">"unique_quiet"</span>, <span class="at">progress =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(transect, section, tick_species, tick_stage, tick_count) </span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>read_data_possibly_v4 <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">possibly</span>(<span class="at">.f =</span> read_data_v4, </span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">otherwise =</span> <span class="fu">tibble</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="troubleshooting-3c" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3c">Troubleshooting (3c)</h2>
<p>Lets look at the other values?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>combined_sheets_temp <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, temp_data) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(temp_data)) <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tick_count <span class="sc">%in%</span> (<span class="fu">c</span>(<span class="st">"20+"</span>, <span class="st">"1(M)"</span>, <span class="st">"1(F)"</span>, <span class="st">"1 (F)"</span>, <span class="st">"1pm"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 6
   datasheet                 transect section tick_species tick_stage tick_count
   &lt;chr&gt;                     &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;     
 1 009_072823_posttreatment‚Ä¶ wood     b       Ix           L          20+       
 2 026 06_06_2023.csv        lawn-ec‚Ä¶ d       De           A          1(M)      
 3 030 06_06_2023 Pre_Treat‚Ä¶ wood     b       De           A          1(F)      
 4 031 06_06_2023 Pre_Treat‚Ä¶ wood-ec‚Ä¶ a       De           A          1(M)      
 5 048 6_12_23.csv           wood     a       Ix           A          1 (F)     
 6 048 6_6_23.csv            lawn-ec‚Ä¶ a       Ix           A          1 (F)     
 7 049 6_6_23.csv            lawn-ec‚Ä¶ c       Ix           A          1(M)      
 8 051_7_18_23.csv           wood     a       Ix           L          1pm       
 9 065 6_12_23.csv           wood     b       Ix           A          1 (F)     
10 067 6_12_23.csv           wood     d       Ix           A          1 (F)     </code></pre>
</div>
</div>
</section>
<section id="troubleshooting-3c-tbd" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3c-tbd">Troubleshooting (3c) tbd</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>temp_exclude <span class="ot">&lt;-</span> combined_sheets_temp <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, temp_data) <span class="sc">%&gt;%</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(temp_data)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tick_count <span class="sc">%in%</span> (<span class="fu">c</span>(<span class="st">"20+"</span>, <span class="st">"1(M)"</span>, <span class="st">"1(F)"</span>, <span class="st">"1 (F)"</span>, <span class="st">"1pm"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet) <span class="sc">%&gt;%</span> </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>temp_exclude</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "009_072823_posttreatment3.csv"    "026 06_06_2023.csv"              
 [3] "030 06_06_2023 Pre_Treatment.csv" "031 06_06_2023 Pre_Treatment.csv"
 [5] "048 6_12_23.csv"                  "048 6_6_23.csv"                  
 [7] "049 6_6_23.csv"                   "051_7_18_23.csv"                 
 [9] "065 6_12_23.csv"                  "067 6_12_23.csv"                 </code></pre>
</div>
</div>
<p>Since there are just a few, it probably is easiest/best to fix by hand. To be save make a comment or keep a raw raw version.</p>
</section>
<section id="troubleshooting-3d" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3d">Troubleshooting (3d)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>combined_sheets <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(datasheet <span class="sc">%in%</span> temp_exclude)) <span class="sc">%&gt;%</span> <span class="do">## temp excluding the problem sheets</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 103,872 √ó 10
   datasheet  path_to_sheet filetype real_filetype transect section tick_species
   &lt;chr&gt;      &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;       
 1 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     a       Ix          
 2 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     a       Ix          
 3 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     a       Ix          
 4 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     b       Ix          
 5 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     b       Ix          
 6 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     b       Ix          
 7 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     c       Ix          
 8 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     c       Ix          
 9 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     c       Ix          
10 001 07_07‚Ä¶ C://Users//d‚Ä¶ csv      csv           wood     d       Ix          
# ‚Ñπ 103,862 more rows
# ‚Ñπ 3 more variables: tick_stage &lt;chr&gt;, tick_count &lt;dbl&gt;,
#   nr_rows_in_tibble &lt;dbl&gt;</code></pre>
</div>
</div>
<p>So after we fix the alternative numbers it should work.</p>
</section>
<section id="final-function" class="level2">
<h2 class="anchored" data-anchor-id="final-function">Final function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="do">## final function</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>read_data_coundata <span class="ot">=</span> <span class="cf">function</span>(filetype, filepath) {</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(filetype <span class="sc">==</span> <span class="st">"csv"</span>) {</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    data.table<span class="sc">::</span><span class="fu">fread</span>(filepath , <span class="at">header =</span> <span class="cn">TRUE</span> , <span class="at">skip =</span> <span class="st">"transect"</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">select =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">blank.lines.skip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">"N/A"</span>, <span class="st">"NA"</span>, <span class="st">"Na"</span>, <span class="st">"nA"</span>, <span class="st">"N.A"</span>))</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">read_excel</span>(filepath, <span class="at">skip =</span> <span class="dv">4</span>,</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">na =</span> <span class="fu">c</span>(<span class="st">"N/A"</span>, <span class="st">"NA"</span>, <span class="st">"Na"</span>, <span class="st">"nA"</span>, <span class="st">"N.A"</span>), </span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">.name_repair =</span> <span class="st">"unique_quiet"</span>, <span class="at">progress =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(transect, section, tick_species, tick_stage, tick_count)</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="metadata-1" class="level1">
<h1>Metadata</h1>
<section id="metadata-2" class="level2">
<h2 class="anchored" data-anchor-id="metadata-2">Metadata</h2>
<ul>
<li>first two lines contain metadata regarding the houses</li>
<li>besides the header row there is only 1 line of data</li>
<li>as a reminder</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="fu">list.files</span>(<span class="at">path =</span> sheet_folder, <span class="at">full.names =</span> <span class="cn">TRUE</span>)[<span class="dv">2</span>], <span class="at">n_max =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1 Columns: 12
‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Delimiter: ","
chr  (9): date, mowed, temp, VMC, cloud_cover, w_person, we_person, le-perso...
dbl  (1): house
time (2): start_time, end_time

‚Ñπ Use `spec()` to retrieve the full column specification for this data.
‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 12
  house date   start_time end_time mowed temp     VMC   cloud_cover w_person
  &lt;dbl&gt; &lt;chr&gt;  &lt;time&gt;     &lt;time&gt;   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;   
1     1 6/1523 09:05      09:24    No    58 (air) 21%   Cloudy      SA      
# ‚Ñπ 3 more variables: we_person &lt;chr&gt;, `le-person` &lt;chr&gt;, l_person &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="metadata-3" class="level2">
<h2 class="anchored" data-anchor-id="metadata-3">Metadata</h2>
<ul>
<li>so only one row of data and we have need all 12 column</li>
<li>we know now that not all files are simply csv with a fixed structure</li>
<li>lets see if we can adapt the last version of the read_data function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>read_metadata_v1 <span class="ot">=</span> <span class="cf">function</span>(filetype, filepath) { <span class="do">## can we do it with 1 version? </span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(filetype <span class="sc">==</span> <span class="st">"csv"</span>) {</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    data.table<span class="sc">::</span><span class="fu">fread</span>(filepath,  <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">blank.lines.skip =</span> <span class="cn">TRUE</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">"N/A"</span>, <span class="st">"NA"</span>, <span class="st">"Na"</span>, <span class="st">"nA"</span>, <span class="st">"N.A"</span>)</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>                      <span class="co">#, .name_repair = "unique_quiet",</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">check.names =</span> <span class="cn">TRUE</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>                      , <span class="at">nrows =</span> <span class="dv">1</span>) <span class="do">## besides the header we only want 1 row</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> { <span class="fu">read_excel</span>(filepath </span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>                        , <span class="at">na =</span> <span class="fu">c</span>(<span class="st">"N/A"</span>, <span class="st">"NA"</span>, <span class="st">"Na"</span>, <span class="st">"nA"</span>, <span class="st">"N.A"</span>) </span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>                        , <span class="at">n_max =</span> <span class="dv">1</span> )</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="metadata-4" class="level2">
<h2 class="anchored" data-anchor-id="metadata-4">Metadata</h2>
<ul>
<li>first with a few</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>temp_metadata <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets) <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">filetype =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(datasheet, <span class="st">"csv"</span>), <span class="st">"csv"</span>, <span class="st">"xlsx"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">real_filetype =</span> <span class="fu">if_else</span>(datasheet <span class="sc">%in%</span> excel_files_with_csv_extension, </span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">'xlsx'</span>, filetype)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">metadata =</span> <span class="fu">map2</span>(<span class="at">.x =</span> real_filetype, <span class="at">.y =</span> path_to_sheet, </span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">.f =</span> read_metadata_v1))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
New names:
New names:
New names:
‚Ä¢ `` -&gt; `...1`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>temp_metadata <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(metadata))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `list_unchop()`:
! Can't combine `x[[1]]$temp` &lt;integer&gt; and `x[[2]]$temp` &lt;character&gt;.</code></pre>
</div>
</div>
<p>Again a conflict between datatypes in a column</p>
</section>
<section id="troubleshooting-3b-1" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3b-1">Troubleshooting (3b)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>temp_metadata <span class="sc">%&gt;%</span> </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_metadata =</span> <span class="fu">map</span>(<span class="at">.x =</span> metadata, <span class="at">.f =</span> mutate_all, as.character)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, temp_metadata) <span class="sc">%&gt;%</span> </span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(temp_metadata))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="troubleshooting-3b-2" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3b-2">Troubleshooting (3b)</h2>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'flextable'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    compose</code></pre>
</div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-233d17a2{}.cl-232b5eea{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-23377ba8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-23378d1e{width:0.75in;background-color:rgba(255, 255, 255, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-23378d1f{width:0.75in;background-color:rgba(255, 255, 255, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-23378d20{width:0.75in;background-color:rgba(255, 0, 0, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-23378d28{width:0.75in;background-color:rgba(255, 255, 255, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-233d17a2"><thead><tr style="overflow-wrap:break-word;"><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">house</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">date</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">start_time</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">end_time</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">mowed</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">temp</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">VMC</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">cloud_cover</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">w_person</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">we_person</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">le.person</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">l_person</span></p></th><th class="cl-23378d1e"><p class="cl-23377ba8"><span class="cl-232b5eea">le-person</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">7/7/2023</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">10:19</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">10:24</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">No</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">80</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">29%</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">Sunny</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">6/1523</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">9:05</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">9:24</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">No</span></p></td><td class="cl-23378d20"><p class="cl-23377ba8"><span class="cl-232b5eea">58 (air)</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">21%</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">Cloudy</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">SA</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">XL</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">CM</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">CM</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">6/5/23</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">9:10</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">9:40</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">N</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">50</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">11</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">cloudy</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">ML</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">AP</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">CM</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">ZS</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">6/26/23</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">9:47</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">10:00</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">N</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">71</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">44</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">cloudy</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">TZ</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">CM</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">CM</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">ML</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">7/14/23</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1:15</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1:20</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">N</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">88</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">25</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">sunny</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">ZS</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">ZS</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">TZ</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">TZ</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">7/19/23</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">2:20</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">2:30</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">88</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">36</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">ZS</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">EO</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">7/28/23</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">3:00</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">3:05</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">N</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">88</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">18</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">sunny</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">TZ</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">TZ</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">TZ</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">DC</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">8/3/23</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">12:15</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">12:23</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">N</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">73</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">25</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">sunny</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">ZS</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">CM</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">CM</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">ZS</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">6/15/23</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">9:05</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">9:24</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">N</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">58</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">21</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">Cloudy</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">SA</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">XL</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">CM</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea">CM</span></p></td><td class="cl-23378d1f"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">1</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">2023-06-22</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">1899-12-31 11:20:00</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">1899-12-31 11:30:00</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">N</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">89</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">30</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">Sunny</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">TZ</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">AD</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea"></span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">EO</span></p></td><td class="cl-23378d28"><p class="cl-23377ba8"><span class="cl-232b5eea">EO</span></p></td></tr></tbody></table></div>
</div>
</div>
<ul>
<li>it only complained about temp, but I also see issues in other variables</li>
<li>Any suggestions on what they are ?</li>
</ul>
</section>
<section id="troubleshooting-3c-1" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3c-1">Troubleshooting (3c)</h2>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-235c26c4{}.cl-235445c6{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-23577dcc{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-23578c9a{width:0.75in;background-color:rgba(255, 255, 255, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-23578ca4{width:0.75in;background-color:rgba(255, 255, 255, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-23578cae{width:0.75in;background-color:rgba(255, 0, 0, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-23578caf{width:0.75in;background-color:rgba(255, 255, 255, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-23578cb0{width:0.75in;background-color:rgba(255, 0, 0, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-235c26c4"><thead><tr style="overflow-wrap:break-word;"><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">house</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">date</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">start_time</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">end_time</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">mowed</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">temp</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">VMC</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">cloud_cover</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">w_person</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">we_person</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">le.person</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">l_person</span></p></th><th class="cl-23578c9a"><p class="cl-23577dcc"><span class="cl-235445c6">le-person</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">7/7/2023</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">10:19</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">10:24</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">No</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">80</span></p></td><td class="cl-23578cae"><p class="cl-23577dcc"><span class="cl-235445c6">29%</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">Sunny</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578cae"><p class="cl-23577dcc"><span class="cl-235445c6">6/1523</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">9:05</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">9:24</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">No</span></p></td><td class="cl-23578cae"><p class="cl-23577dcc"><span class="cl-235445c6">58 (air)</span></p></td><td class="cl-23578cae"><p class="cl-23577dcc"><span class="cl-235445c6">21%</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">Cloudy</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">SA</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">XL</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">CM</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">CM</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">6/5/23</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">9:10</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">9:40</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">N</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">50</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">11</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">cloudy</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">ML</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">AP</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">CM</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">ZS</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">6/26/23</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">9:47</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">10:00</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">N</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">71</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">44</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">cloudy</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">TZ</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">CM</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">CM</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">ML</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">7/14/23</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1:15</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1:20</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">N</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">88</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">25</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">sunny</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">ZS</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">ZS</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">TZ</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">TZ</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">7/19/23</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">2:20</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">2:30</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">88</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">36</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">ZS</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">EO</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">7/28/23</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">3:00</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">3:05</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">N</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">88</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">18</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">sunny</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">TZ</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">TZ</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">TZ</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">DC</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">8/3/23</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">12:15</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">12:23</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">N</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">73</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">25</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">sunny</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">ZS</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">CM</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">CM</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">ZS</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">6/15/23</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">9:05</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">9:24</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">N</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">58</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">21</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">Cloudy</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">SA</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">XL</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">CM</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6">CM</span></p></td><td class="cl-23578ca4"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6">1</span></p></td><td class="cl-23578cb0"><p class="cl-23577dcc"><span class="cl-235445c6">2023-06-22</span></p></td><td class="cl-23578cb0"><p class="cl-23577dcc"><span class="cl-235445c6">1899-12-31 11:20:00</span></p></td><td class="cl-23578cb0"><p class="cl-23577dcc"><span class="cl-235445c6">1899-12-31 11:30:00</span></p></td><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6">N</span></p></td><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6">89</span></p></td><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6">30</span></p></td><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6">Sunny</span></p></td><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6">TZ</span></p></td><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6">AD</span></p></td><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6"></span></p></td><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6">EO</span></p></td><td class="cl-23578caf"><p class="cl-23577dcc"><span class="cl-235445c6">EO</span></p></td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="troubleshooting-3d-1" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3d-1">Troubleshooting (3d)</h2>
<ul>
<li>lets go ahead and run open all the data
<ul>
<li>data is still all character</li>
<li>do we have big issues?</li>
<li>or just a few that we can fix manually</li>
</ul></li>
</ul>
<p>First it seem to have 2 extra columns lets check those first</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>check_metadata <span class="sc">%&gt;%</span>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 20
  datasheet path_to_sheet filetype real_filetype metadata house date  start_time
  &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;         &lt;list&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     
1 001 07_0‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;     1     7/7/‚Ä¶ 10:19     
2 001 6_15‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;     1     6/15‚Ä¶ 9:05      
3 001_0605‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;     1     6/5/‚Ä¶ 9:10      
4 001_0626‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;     1     6/26‚Ä¶ 9:47      
5 001_0714‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;     1     7/14‚Ä¶ 1:15      
# ‚Ñπ 12 more variables: end_time &lt;chr&gt;, mowed &lt;chr&gt;, temp &lt;chr&gt;, VMC &lt;chr&gt;,
#   cloud_cover &lt;chr&gt;, w_person &lt;chr&gt;, we_person &lt;chr&gt;, le.person &lt;chr&gt;,
#   l_person &lt;chr&gt;, `le-person` &lt;chr&gt;, Temp &lt;chr&gt;, ...1 &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="troubleshooting-3e" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3e">Troubleshooting (3e)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>check_metadata <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Temp)) <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, house, temp, Temp) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 4
  datasheet                      house temp  Temp 
  &lt;chr&gt;                          &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 018_6_16_23_posttreatment1.csv 18    &lt;NA&gt;  81   </code></pre>
</div>
</div>
<p>Ok, so Temp is temp, lets fix it</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>step1 <span class="ot">&lt;-</span> check_metadata <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">temp =</span> <span class="fu">if_else</span>(<span class="at">condition =</span> <span class="fu">is.na</span>(temp)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>                                                  , <span class="at">true =</span> Temp</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>                                                  , <span class="at">false =</span> temp)) <span class="sc">%&gt;%</span> </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Temp) <span class="do">## remove the extra column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="troubleshooting-3f" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3f">Troubleshooting (3f)</h2>
<p>Now the checking ‚Ä¶1 and fixing it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>step1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(...<span class="dv">1</span>))   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 19
  datasheet path_to_sheet filetype real_filetype metadata house date  start_time
  &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;         &lt;list&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     
1 022_6_22‚Ä¶ C://Users//d‚Ä¶ xlsx     xlsx          &lt;tibble&gt; &lt;NA&gt;  6_22‚Ä¶ 1899-12-3‚Ä¶
2 024_6_23‚Ä¶ C://Users//d‚Ä¶ xlsx     xlsx          &lt;tibble&gt; &lt;NA&gt;  6_23‚Ä¶ 1899-12-3‚Ä¶
3 026_6_22‚Ä¶ C://Users//d‚Ä¶ xlsx     xlsx          &lt;tibble&gt; &lt;NA&gt;  6_22‚Ä¶ 1899-12-3‚Ä¶
4 027_6_22‚Ä¶ C://Users//d‚Ä¶ xlsx     xlsx          &lt;tibble&gt; &lt;NA&gt;  6_22‚Ä¶ 1899-12-3‚Ä¶
# ‚Ñπ 11 more variables: end_time &lt;chr&gt;, mowed &lt;chr&gt;, temp &lt;chr&gt;, VMC &lt;chr&gt;,
#   cloud_cover &lt;chr&gt;, w_person &lt;chr&gt;, we_person &lt;chr&gt;, le.person &lt;chr&gt;,
#   l_person &lt;chr&gt;, `le-person` &lt;chr&gt;, ...1 &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>step1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(...<span class="dv">1</span>))  <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, house, ...<span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
  datasheet                       house ...1 
  &lt;chr&gt;                           &lt;chr&gt; &lt;chr&gt;
1 022_6_22_23_posttreatment2.xlsx &lt;NA&gt;  22   
2 024_6_23_23_posttreatment2.xlsx &lt;NA&gt;  24   
3 026_6_22_23_posttreatment2.xlsx &lt;NA&gt;  26   
4 027_6_22_23_posttreatment2.xlsx &lt;NA&gt;  27   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>step2 <span class="ot">&lt;-</span> step1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">house =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(house), ...<span class="dv">1</span>, house)) <span class="sc">%&gt;%</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>...<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="troubleshooting-3g" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3g">Troubleshooting (3g)</h2>
<ul>
<li>Next we check why not all temp is numeric</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>step2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">temp_numeric =</span> <span class="fu">as.numeric</span>(temp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `mutate()`:
‚Ñπ In argument: `temp_numeric = as.numeric(temp)`.
Caused by error:
! invalid multibyte string at '&lt;a1&gt; F'</code></pre>
</div>
</div>
<ul>
<li>I had no idea what that means</li>
<li>has something to do with a non standard character (thanks Google)</li>
<li>you can find them by looking at character length</li>
</ul>
</section>
<section id="troubleshooting-3g-1" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3g-1">Troubleshooting (3g)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>as.numeric_possible <span class="ot">&lt;-</span> <span class="fu">possibly</span>(<span class="at">.f =</span> as.numeric, <span class="at">otherwise =</span> <span class="dv">999</span>)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>step2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">temporal_temp =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> temp, <span class="at">.f =</span> as.numeric_possible)) <span class="sc">%&gt;%</span> </span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, house, temp, temporal_temp) <span class="sc">%&gt;%</span> </span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(temporal_temp <span class="sc">==</span> <span class="dv">999</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 29 warnings in `mutate()`.
The first warning was:
‚Ñπ In argument: `temporal_temp = map_dbl(.x = temp, .f = as.numeric_possible)`.
Caused by warning:
! NAs introduced by coercion
‚Ñπ Run `dplyr::last_dplyr_warnings()` to see the 28 remaining warnings.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 45 √ó 4
   datasheet                         house temp  temporal_temp
   &lt;chr&gt;                             &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;
 1 029_06.27.2023_PostTreatment3.csv 29    83ÔøΩ F           999
 2 033_06.27.2023_PostTreatment3.csv 33    82ÔøΩ F           999
 3 034_06.22.2023_PostTreatment2.csv 34    84ÔøΩ F           999
 4 035_06.22.2023_PostTreatment2.csv 35    81ÔøΩ F           999
 5 036_06.22.2023_PostTreatment2.csv 36    83ÔøΩ F           999
 6 037_06.22.2023_PostTreatment2.csv 37    81ÔøΩ F           999
 7 038_06.22.2023_PostTreatment2.csv 38    81ÔøΩ F           999
 8 039_06.22.2023_PostTreatment2.csv 39    88ÔøΩ F           999
 9 040_06.21.2023_PostTreatment2.csv 40    75ÔøΩ F           999
10 041_06.21.2023_PostTreatment2.csv 41    77ÔøΩ F           999
# ‚Ñπ 35 more rows</code></pre>
</div>
</div>
<ul>
<li>The question mark is a subscript i.</li>
<li>This is a tricky one to solve unless you go into all those datasheets and fix it,</li>
</ul>
</section>
<section id="troubleshooting-3h" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-3h">Troubleshooting (3h)</h2>
<ul>
<li>ut I noticed (using View) that none of the temperatures in the problem sheets were above 99.</li>
<li>So we could just take the first 2 digits</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>step2 <span class="sc">%&gt;%</span> </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temporal_temp =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> temp, <span class="at">.f =</span> as.numeric_possible)) <span class="sc">%&gt;%</span> </span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, house, temp, temporal_temp) <span class="sc">%&gt;%</span> </span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(temp)) <span class="sc">%&gt;%</span> </span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(temporal_temp <span class="sc">==</span> <span class="dv">999</span> <span class="sc">|</span> <span class="fu">is.na</span>(temporal_temp)) <span class="sc">%&gt;%</span> </span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_numeric =</span> <span class="fu">as.numeric</span>(<span class="fu">if_else</span>(<span class="at">condition =</span> temporal_temp <span class="sc">==</span> <span class="dv">999</span> <span class="sc">|</span> <span class="fu">is.na</span>(temporal_temp), </span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">true =</span> <span class="fu">str_sub</span>(<span class="at">string =</span> temp, <span class="dv">1</span>, <span class="dv">2</span>), </span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">false =</span> temp))) <span class="sc">%&gt;%</span> </span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 29 warnings in `mutate()`.
The first warning was:
‚Ñπ In argument: `temporal_temp = map_dbl(.x = temp, .f = as.numeric_possible)`.
Caused by warning:
! NAs introduced by coercion
‚Ñπ Run `dplyr::last_dplyr_warnings()` to see the 28 remaining warnings.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `temp_numeric = as.numeric(...)`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 5
   datasheet                         house temp      temporal_temp temp_numeric
   &lt;chr&gt;                             &lt;chr&gt; &lt;chr&gt;             &lt;dbl&gt;        &lt;dbl&gt;
 1 001 6_15_23.csv                   1     58 (air)             NA           58
 2 019 07_07_2023.csv                19    Sunny                NA           NA
 3 024_06.29.2023_PostTreatment3.csv 24    81¬∞ F                NA           81
 4 025_06.29.2023_PostTreatment3.csv 25    85¬∞ F                NA           85
 5 028_6_16_23_posttreatment1.csv    28    Pt Cloudy            NA           NA
 6 029_06.27.2023_PostTreatment3.csv 29    83ÔøΩ F               999           83
 7 033_06.27.2023_PostTreatment3.csv 33    82ÔøΩ F               999           82
 8 034 06_06_2023 Pre_Treatment .csv 34    81-86                NA           81
 9 034_06.22.2023_PostTreatment2.csv 34    84ÔøΩ F               999           84
10 034_06.29.2023_PostTreatment3.csv 34    88¬∞ F                NA           88</code></pre>
</div>
</div>
</section>
<section id="next-vmc" class="level2">
<h2 class="anchored" data-anchor-id="next-vmc">Next VMC</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>step3 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">VMC_numeric =</span> <span class="fu">as.numeric</span>(VMC)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(VMC_numeric))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `VMC_numeric = as.numeric(VMC)`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 282 √ó 22
   datasheet          path_to_sheet  filetype real_filetype metadata house date 
   &lt;chr&gt;              &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt;         &lt;list&gt;   &lt;chr&gt; &lt;chr&gt;
 1 001 07_07_2023.csv C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     1     7/7/‚Ä¶
 2 001 6_15_23.csv    C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     1     6/15‚Ä¶
 3 002 07_07_2023.csv C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     2     7/7/‚Ä¶
 4 002 6_15_23.csv    C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     2     6/15‚Ä¶
 5 004 07_07_2023.csv C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     4     7/7/‚Ä¶
 6 006 07_06_2023.csv C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     6     7/6/‚Ä¶
 7 006 07_18_2023.csv C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     6     7/18‚Ä¶
 8 007 07_07_2023.csv C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     7     7/7/‚Ä¶
 9 008 07_06_2023.csv C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     8     7/6/‚Ä¶
10 008 07_18_2023.csv C://Users//da‚Ä¶ csv      csv           &lt;dt&gt;     8     7/18‚Ä¶
# ‚Ñπ 272 more rows
# ‚Ñπ 15 more variables: start_time &lt;chr&gt;, end_time &lt;chr&gt;, mowed &lt;chr&gt;,
#   temp &lt;chr&gt;, VMC &lt;chr&gt;, cloud_cover &lt;chr&gt;, w_person &lt;chr&gt;, we_person &lt;chr&gt;,
#   le.person &lt;chr&gt;, l_person &lt;chr&gt;, `le-person` &lt;chr&gt;, temporal_temp &lt;dbl&gt;,
#   temp_numeric &lt;dbl&gt;, temp_C &lt;dbl&gt;, VMC_numeric &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="do">## see if we remove % sign we fix the issue</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>step3 <span class="sc">%&gt;%</span> </span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">VMC_numeric =</span> <span class="fu">as.numeric</span>(<span class="fu">str_remove_all</span>(<span class="at">string =</span> VMC, <span class="at">pattern =</span> <span class="st">"%"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(VMC) <span class="sc">&amp;</span> <span class="fu">is.na</span>(VMC_numeric)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(datasheet, <span class="fu">contains</span>(<span class="st">"VMC"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `VMC_numeric = as.numeric(str_remove_all(string = VMC, pattern =
  "%"))`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  datasheet                   VMC                 VMC_numeric
  &lt;chr&gt;                       &lt;chr&gt;                     &lt;dbl&gt;
1 057 06_07_2023.csv          14:R 42:L                    NA
2 057 6_7_23.csv              14 (R) 42 (L)                NA
3 057_060723_pretreatment.csv 14% right, 42% left          NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="do">## almost </span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="do">## fix last few manually</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>step4 <span class="ot">&lt;-</span> step3 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">VMC_numeric =</span> <span class="fu">as.numeric</span>(<span class="fu">str_remove_all</span>(<span class="at">string =</span> VMC, <span class="at">pattern =</span> <span class="st">"%"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `VMC_numeric = as.numeric(str_remove_all(string = VMC, pattern =
  "%"))`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
</div>
</section>
<section id="finally-dates-and-times" class="level2">
<h2 class="anchored" data-anchor-id="finally-dates-and-times">Finally dates and times</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>step4 <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, date) <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_ymd =</span> <span class="fu">mdy</span>(date)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_ymd =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(date_ymd), <span class="fu">ymd</span>(date), date_ymd)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(date_ymd))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `date_ymd = mdy(date)`.
Caused by warning:
!  269 failed to parse.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `date_ymd = if_else(is.na(date_ymd), ymd(date), date_ymd)`.
Caused by warning:
!  827 failed to parse.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
  datasheet                         date        date_ymd
  &lt;chr&gt;                             &lt;chr&gt;       &lt;date&gt;  
1 001 6_15_23.csv                   6/1523      NA      
2 037_06.15.2023_PostTreatment1.csv 06/15/20223 NA      
3 055 6_7_23.csv                    7-Jun       NA      
4 060 06_12_2023.csv                12-Jun      NA      </code></pre>
</div>
</div>
<ul>
<li>Few left that would be easiest fix mannually.</li>
<li>Almost there. Just times left</li>
</ul>
</section>
<section id="fixing-times-1" class="level2">
<h2 class="anchored" data-anchor-id="fixing-times-1">Fixing Times (1)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>(step4a <span class="ot">&lt;-</span> step4 <span class="sc">%&gt;%</span> </span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(start_time) <span class="sc">|</span> <span class="sc">!</span><span class="fu">is.na</span>(end_time)) <span class="sc">%&gt;%</span> </span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, start_time, end_time) <span class="sc">%&gt;%</span> </span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">start_time_hm =</span> <span class="fu">hm</span>(start_time), </span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">end_time_hm =</span> <span class="fu">hm</span>(end_time)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 2 warnings in `mutate()`.
The first warning was:
‚Ñπ In argument: `start_time_hm = hm(start_time)`.
Caused by warning in `.parse_hms()`:
! Some strings failed to parse, or all strings are NAs
‚Ñπ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,080 √ó 5
   datasheet                      start_time  end_time start_time_hm end_time_hm
   &lt;chr&gt;                          &lt;chr&gt;       &lt;chr&gt;    &lt;Period&gt;      &lt;Period&gt;   
 1 001 07_07_2023.csv             10:19       10:24    10H 19M 0S    10H 24M 0S 
 2 001 6_15_23.csv                9:05        9:24     9H 5M 0S      9H 24M 0S  
 3 001_060523_pretreatment.csv    9:10        9:40     9H 10M 0S     9H 40M 0S  
 4 001_062623_posttreatment3.csv  9:47        10:00    9H 47M 0S     10H 0M 0S  
 5 001_071423_posttreatment1.csv  1:15        1:20     1H 15M 0S     1H 20M 0S  
 6 001_071923_posttreatment2.csv  2:20        2:30     2H 20M 0S     2H 30M 0S  
 7 001_072823_posttreatment3.csv  3:00        3:05     3H 0M 0S      3H 5M 0S   
 8 001_080323_posttreatment8.csv  12:15       12:23    12H 15M 0S    12H 23M 0S 
 9 001_6_15_23_posttreatment1.csv 9:05        9:24     9H 5M 0S      9H 24M 0S  
10 001_6_22_23_PostTreatment2.csv 1899-12-31‚Ä¶ 1899-12‚Ä¶ NA            NA         
# ‚Ñπ 1,070 more rows</code></pre>
</div>
</div>
</section>
<section id="fixing-times-2" class="level2">
<h2 class="anchored" data-anchor-id="fixing-times-2">Fixing Times (2)</h2>
<ul>
<li>some issues left</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>step4 <span class="sc">%&gt;%</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet, start_time, end_time) <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">names_to =</span> <span class="st">"time_group"</span>, <span class="at">values_to =</span> <span class="st">"time"</span>, <span class="at">cols =</span> <span class="fu">c</span>(start_time<span class="sc">:</span>end_time)) <span class="sc">%&gt;%</span> </span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(time)) <span class="sc">%&gt;%</span> </span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_hm =</span> <span class="fu">hm</span>(time)) <span class="sc">%&gt;%</span> </span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(time_hm)) <span class="sc">%&gt;%</span> </span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_hm =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(time_hm), time_hm, <span class="fu">hms</span>(<span class="fu">str_remove</span>(time, <span class="st">"1899-12-31"</span>)))) <span class="sc">%&gt;%</span> </span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(time_hm)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `time_hm = hm(time)`.
Caused by warning in `.parse_hms()`:
! Some strings failed to parse, or all strings are NAs</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
‚Ñπ In argument: `time_hm = if_else(!is.na(time_hm), time_hm,
  hms(str_remove(time, "1899-12-31")))`.
Caused by warning in `.parse_hms()`:
! Some strings failed to parse, or all strings are NAs</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 4
  datasheet                       time_group time  time_hm 
  &lt;chr&gt;                           &lt;chr&gt;      &lt;chr&gt; &lt;Period&gt;
1 043_6_15_23_posttreatment1.xlsx start_time 11    NA      
2 056_6_15_23_posttreatment1.xlsx end_time   1     NA      </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>step4a <span class="sc">%&gt;%</span> </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">start_time_hm =</span> <span class="fu">hms</span>(<span class="fu">str_remove</span>(start_time, <span class="st">"1899-12-31"</span>)), </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">end_time_hm =</span> <span class="fu">hms</span>(<span class="fu">str_remove</span>(end_time, <span class="st">"1899-12-31"</span>))) </span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(start_time) <span class="sc">&amp;</span> <span class="fu">is.na</span>(start_time_hm))</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">#!is.na(end_time) &amp; is.na(end_time_hm)))</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="do">## fix these by hand</span></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a><span class="co"># final_metadata &lt;- step5 %&gt;% mutate(start_time_hm = hm(start_time), end_time_hm = hm(end_time)) %&gt;% mutate(start = str_remove(start_time, "1899-12-31"), end = str_remove(end_time, "1899-12-31")) %&gt;% mutate(start_time_hm = if_else(is.na(start_time_hm), hms(start),start_time_hm), end_time_hm = if_else(is.na(end_time_hm), hms(end),end_time_hm))</span></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="do">## need to fix some of the column names</span></span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a><span class="co">#full_count_dataset %&gt;% inner_join(final_metadata) \## this won't work, because the errors that are still in the dataset</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="use-cleaned-up-dataset" class="level1">
<h1>Use cleaned up dataset</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>updated_sheet_folder <span class="ot">=</span> <span class="st">"C://Users//dajansen3//Box//EC 2023 data by housecode//"</span> </span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>all_datasheets_cleaned <span class="ot">&lt;-</span> <span class="fu">list.files</span>(updated_sheet_folder, <span class="at">all.files =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>, <span class="at">pattern =</span> <span class="st">"csv"</span>)</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>excel_files_with_csv_extension <span class="ot">&lt;-</span><span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets_cleaned) <span class="sc">%&gt;%</span> </span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(updated_sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">filetype =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(datasheet, <span class="st">"csv"</span>), <span class="st">"csv"</span>, <span class="st">"xlsx"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(<span class="at">.x =</span> path_to_sheet, <span class="at">.f =</span> read_data_possibly_v2)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_rows_in_tibble =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nr_rows_in_tibble <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datasheet) <span class="sc">%&gt;%</span> </span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a>combined_cleaned_sheets <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets_cleaned) <span class="sc">%&gt;%</span> </span>
<span id="cb112-15"><a href="#cb112-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">175</span>, <span class="dv">190</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-16"><a href="#cb112-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(updated_sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-17"><a href="#cb112-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">filetype =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(datasheet, <span class="st">"csv"</span>), <span class="st">"csv"</span>, <span class="st">"xlsx"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb112-18"><a href="#cb112-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">real_filetype =</span> <span class="fu">if_else</span>(datasheet <span class="sc">%in%</span> excel_files_with_csv_extension, <span class="st">'xlsx'</span>, filetype)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-19"><a href="#cb112-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map2</span>(<span class="at">.x =</span> real_filetype, <span class="at">.y =</span> path_to_sheet, <span class="at">.f =</span> read_data_possibly_v4)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-20"><a href="#cb112-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_row_on_sheet =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow))</span>
<span id="cb112-21"><a href="#cb112-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-22"><a href="#cb112-22" aria-hidden="true" tabindex="-1"></a>full_count_dataset <span class="ot">&lt;-</span> combined_cleaned_sheets <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(data))</span>
<span id="cb112-23"><a href="#cb112-23" aria-hidden="true" tabindex="-1"></a>full_count_dataset <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(tick_count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 1
  tick_count
       &lt;dbl&gt;
1         NA
2          0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets_cleaned) <span class="sc">%&gt;%</span> </span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path_to_sheet =</span> <span class="fu">paste0</span>(updated_sheet_folder, datasheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">filetype =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(datasheet, <span class="st">"csv"</span>), <span class="st">"csv"</span>, <span class="st">"xlsx"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">real_filetype =</span> <span class="fu">if_else</span>(datasheet <span class="sc">%in%</span> excel_files_with_csv_extension, <span class="st">'xlsx'</span>, filetype)) <span class="sc">%&gt;%</span> </span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map2</span>(<span class="at">.x =</span> real_filetype, <span class="at">.y =</span> path_to_sheet, <span class="at">.f =</span> read_metadata_v1)) <span class="sc">%&gt;%</span> </span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_row_on_sheet =</span> <span class="fu">map_dbl</span>(<span class="at">.x =</span> data, <span class="at">.f =</span> nrow))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 556 √ó 6
   datasheet       path_to_sheet filetype real_filetype data     nr_row_on_sheet
   &lt;chr&gt;           &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;         &lt;list&gt;             &lt;dbl&gt;
 1 001/001_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      xlsx          &lt;tibble&gt;               1
 2 001/001_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;                   1
 3 001/001_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      xlsx          &lt;tibble&gt;               1
 4 001/001_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;                   1
 5 001/001_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;                   1
 6 001/001_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;                   1
 7 001/001_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;                   1
 8 001/001_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;                   1
 9 001/001_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;                   1
10 002/002_2023_0‚Ä¶ C://Users//d‚Ä¶ csv      csv           &lt;dt&gt;                   1
# ‚Ñπ 546 more rows</code></pre>
</div>
</div>
<section id="data-control" class="level2">
<h2 class="anchored" data-anchor-id="data-control">Data control</h2>
<ul>
<li>there should be 68 houses * 20 sheets = 1360</li>
<li>filenames contains some info
<ul>
<li>house</li>
<li>data</li>
<li>treatment</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="do">## before dealing with all these problems we should check if we have all the data.</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>house_sheet_info <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">datasheet =</span> all_datasheets_cleaned) <span class="sc">%&gt;%</span> </span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">info =</span> <span class="fu">str_remove_all</span>(datasheet, <span class="at">pattern =</span> <span class="st">'.csv|.xlsx'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">info =</span> <span class="fu">str_remove_all</span>(info, <span class="at">pattern =</span> <span class="st">'</span><span class="sc">\\</span><span class="st">(.*'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">info =</span> <span class="fu">str_squish</span>(info)) <span class="sc">%&gt;%</span> </span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(info, <span class="at">into =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">"house"</span>, <span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"treatment"</span>), <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">completed =</span> <span class="fu">complete.cases</span>(.)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 6 pieces. Missing pieces filled with `NA` in 1 rows [556].</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>house_sheet_info <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">ymd</span>(<span class="fu">paste</span>(year, month, day, <span class="at">sep =</span> <span class="st">"-"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(house, date) <span class="sc">%&gt;%</span> </span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'house'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 556 √ó 3
# Groups:   house [66]
   house date       `n()`
   &lt;chr&gt; &lt;date&gt;     &lt;int&gt;
 1 001   2023-06-05     1
 2 001   2023-06-15     1
 3 001   2023-06-22     1
 4 001   2023-06-26     1
 5 001   2023-07-07     1
 6 001   2023-07-14     1
 7 001   2023-07-19     1
 8 001   2023-07-28     1
 9 001   2023-08-03     1
10 002   2023-06-05     1
# ‚Ñπ 546 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>house_sheet_info <span class="sc">%&gt;%</span> </span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(house, treatment)  <span class="sc">%&gt;%</span> </span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nr_sheets =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(house, treatment) <span class="sc">%&gt;%</span> </span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">treatment =</span> forcats<span class="sc">::</span><span class="fu">fct_relevel</span>(treatment, <span class="st">"pretreatment"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr_sheets =</span> <span class="fu">as_factor</span>(nr_sheets)) <span class="sc">%&gt;%</span> </span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>treatment, <span class="at">y =</span> house, <span class="at">fill =</span> nr_sheets)) <span class="sc">+</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"#fdae61"</span>, <span class="st">"#fee08b"</span>, <span class="st">"#e6f598"</span>, <span class="st">"#abdda4"</span>), <span class="at">na.value =</span> <span class="st">"grey90"</span>) <span class="sc">+</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>    cowplot<span class="sc">::</span><span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">45</span>,<span class="at">hjust=</span><span class="dv">1</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'house'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data_wrangling_of_field_data_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>#But we have length(list.files(path = sheet_folder)) (68 * 20) - length(list.files(path = sheet_folder)) ## are missing</p>
<p>tibble(filename = list.files(path = sheet_folder)) %&gt;% mutate(house = as.numeric(str_sub(filename, 1, 3))) %&gt;%<br>
group_by(house) %&gt;% summarise(nr_sheets = n()) %&gt;% summarise(max_nr_sheets = max(nr_sheets), min_nr_sheets = min(nr_sheets), median_nr_sheets = median(nr_sheets))</p>
</section>
<section id="the-warning-is-because-naming-was-not-consistent" class="level2">
<h2 class="anchored" data-anchor-id="the-warning-is-because-naming-was-not-consistent">the warning is because naming was not consistent</h2>
<p>tibble(filename = list.files(path = sheet_folder)) %&gt;% mutate(house = as.numeric(str_sub(filename, 1, 3))) %&gt;%<br>
group_by(house) %&gt;% summarise(nr_sheets = n()) %&gt;% group_by(nr_sheets) %&gt;% summarise(nr_houses = n()) %&gt;% arrange(-nr_sheets)</p>
</section>
<section id="quick-side-step" class="level2">
<h2 class="anchored" data-anchor-id="quick-side-step">quick side step</h2>
</section>
<section id="note-that-here-there-are-na-values-because-the-tick-count-was-not-filled-out" class="level2">
<h2 class="anchored" data-anchor-id="note-that-here-there-are-na-values-because-the-tick-count-was-not-filled-out">note that here there are NA values, because the tick count was not filled out</h2>
</section>
<section id="are-these-all-0-or-are-the-not-sampled" class="level2">
<h2 class="anchored" data-anchor-id="are-these-all-0-or-are-the-not-sampled">are these all 0 or are the not sampled?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "cv.html"                                       
 [2] "cv.qmd"                                        
 [3] "data"                                          
 [4] "data_wraggling_with_field_data_to_be_deleted.R"
 [5] "data_wrangling_of_field_data.qmd"              
 [6] "data_wrangling_of_field_data.rmarkdown"        
 [7] "data_wrangling_of_field_data_files"            
 [8] "figures"                                       
 [9] "git_version_control.qmd"                       
[10] "good_data_practises.qmd"                       
[11] "intro_into_ggplot.qmd"                         
[12] "MCEVBD_interview"                              
[13] "MCEVBD_interview.qmd"                          
[14] "pdf"                                           
[15] "reproducibility_workshop.qmd"                  </code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>